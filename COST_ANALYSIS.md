# تحليل التكاليف التشغيلية للمشروع (Cost Analysis)
**التاريخ:** 2026-01-15
**العملة:** دولار أمريكي ($)

هذا التقرير يحلل التكاليف المتوقعة لتشغيل المنصة لكل مستخدم ولكل عملية، بناءً على البنية الحالية (DeepSeek V3 API) ومتوسط حجم الملفات الدراسية.

---

## 1. المعايير والافتراضات (The Benchmark)

لبناء حسابات دقيقة، سنفترض السيناريو التالي "لملف دراسي متوسط":
*   **حجم الملف:** 50 صفحة (PDF نصي).
*   **عدد الكلمات:** 500 كلمة للصفحة × 50 = 25,000 كلمة.
*   **عدد الأحرف:** ~150,000 حرف.
*   **عدد التوكنز (Tokens):** ~50,000 توكن (Input) للغة العربية/الانجليزية (تقدير محافظ).

---

## 2. تكاليف الذكاء الاصطناعي (DeepSeek V3)

تعتمد المنصة حالياً على `deepseek-chat` (V3). أسعار DeepSeek تعتبر "ثورية" ورخيصة جداً مقارنة بالسوق.

**قائمة الأسعار الرسمية (DeepSeek):**
*   **الإدخال (Input):** 0.14$ لكل مليون توكن (أو 0.014$ في حال Cache Hit).
*   **الإخراج (Output):** 0.28$ لكل مليون توكن.

### تكلفة معالجة "ملف 50 صفحة" (50k Tokens):

| العملية | الآلية البرمجية (Logic) | توكنز الإدخال | توكنز الإخراج (تقديري) | التكلفة (Input + Output) |
| :--- | :--- | :--- | :--- | :--- |
| **1. التلخيص الشامل (Summary)** | تقسيم لـ 6 أجزاء (Chunks) ومعالجة متوازية | 50,000 | 3,000 (500/جزء) | **$0.0078** (أقل من 1 سنت) |
| **2. إنشاء اختبار (Quiz)** | تحليل أهم 5 أجزاء (150k حرف) | 50,000 | 2,000 (JSON) | **$0.0075** |
| **3. فلاش كاردز (Flashcards)** | تحليل أهم 5 أجزاء | 50,000 | 2,000 (JSON) | **$0.0075** |
| **4. ملاحظات ذكية (Notes)** | مسح كامل للنص مرة واحدة | 50,000 | 1,000 | **$0.0073** |
| **5. المصطلحات (Glossary)** | مسح كامل للنص | 50,000 | 1,000 | **$0.0073** |
| **6. المحادثة (Chat)** | 10 رسائل (سؤال وجواب) مع سياق ذكي | ~45,000 | ~5,000 | **$0.0077** |
| **المجموع الكلي للملف الواحد** | **تفعيل كافة المميزات + 10 أسئلة شات** | **~295,000** | **~14,000** | **~$0.045 (4.5 سنت)** |

> **الخلاصة:** معالجة كتاب كامل من 50 صفحة واستخراج (ملخص + اختبار + بطاقات + ملاحظات) **بالإضافة إلى 10 أسئلة تفاعلية** يكلف حوالي **0.045 دولار (4.5 سنتات)** فقط.

### تفصيل تكلفة الشات (10 رسائل):
الدردشة مع الملف تعني إرسال جزء من محتوى الملف مع كل سؤال ليفهم الـ AI السياق.
*   **السيناريو:** 10 أسئلة، كل سؤال يستهلك 4,500 توكن (4000 سياق + 500 حوار).
*   **بدون Cache:** التكلفة حوالي **0.0077$**.
*   **مع DeepSeek Context Caching:** إذا كان الطالب يسأل أسئلة متتالية في جلسة واحدة، التكلفة تنخفض بنسبة تصل إلى **90%** للرسائل اللاحقة، لتصبح التكلفة الإجمالية لـ 10 رسائل حوالي **0.002$ (خُمس سنت)**!

---

## 3. مقارنة مع المنافسين (Competitor Analysis)

إذا قررت الانتقال إلى OpenAI، ستتضاعف التكلفة بشكل كبير. الجدول التالي يقارن تكلفة "المجموع الكلي للملف الواحد" (العملية الكاملة):

| الموديل | السعر (Input / Output) لكل 1M | تكلفة الملف الواحد (50 صفحة) | الفرق عن DeepSeek |
| :--- | :--- | :--- | :--- |
| **DeepSeek V3** | $0.14 / $0.28 | **$0.037** | - |
| **GPT-4o-mini** | $0.15 / $0.60 | **$0.043** | مقارب جداً (أغلى قليلاً) |
| **GPT-4o (الذكاء الكامل)** | $2.50 / $10.00 | **$0.715** | **أغلى بـ 19 ضعف!** |
| **Claude 3.5 Sonnet** | $3.00 / $15.00 | **$0.885** | **أغلى بـ 24 ضعف!** |

**توصية:** البقاء على **DeepSeek V3** هو الخيار الاقتصادي الأمثل حالياً، حيث يقدم ذكاءً مقارباً لـ GPT-4o بسعر GPT-4o-mini.

---

## 4. تكاليف البنية التحتية (Infrastructure)

بعيداً عن الـ AI، هناك تكاليف تشغيل الخوادم وقواعد البيانات.

### أ. السيرفر (Hosting)
*   **الخيار:** Railway أو Render.
*   **الخطة:** Hobby/Pro.
*   **التكلفة:** **5$ - 20$ شهرياً**.
*   *ملاحظة:* هذه تكلفة ثابتة تغطي آلاف المستخدمين حتى تبدأ بالحاجة للتوسع (Scaling).

### ب. قاعدة البيانات (PostgreSQL + Prisma)
*   **التخزين:** النصوص تأخذ مساحة صغيرة جداً. 10,000 ملف قد يستهلك أقل من 1GB.
*   **المشكلة المحتملة:** الـ Vector Embeddings (للبحث الدلالي مستقبلاً) تستهلك RAM.
*   **التكلفة:** ضمن اشتراك السيرفر (5$) في البداية، وقد تصل لـ **15$-30$** عند وصولك لـ 10,000 مستخدم.

### ج. تخزين الملفات (File Storage)
*   حالياً: تخزين محلي (Local).
*   مستقبلاً (S3 / UploadThing):
    *   تخزين 100GB (حوالي 20,000 ملف PDF): **~2.30$ شهرياً**.
    *   نقل البيانات (Bandwidth): رخيص جداً للنصوص.

---

## 5. تقدير التكلفة الشهرية (Projected Monthly Burn)

لنفترض أن لديك **1,000 مستخدم نشط** شهرياً، وكل مستخدم يرفع **5 ملفات** (50 صفحة) شهرياً.

1.  **تكاليف AI:**
    *   1,000 مستخدم × 5 ملفات = 5,000 ملف.
    *   5,000 ملف × 0.04$ = **200$**.

2.  **تكاليف السيرفر وقاعدة البيانات:**
    *   خطة Pro لضمان الاستقرار = **20$**.

3.  **تكاليف التخزين:**
    *   تقريباً **5$**.

**التكلفة الإجمالية الشهرية:** **~225$**
**التكلفة لكل مستخدم:** **0.22$ (22 سنت)**

---

## 6. استراتيجيات تحسين التكلفة (Optimization)

1.  **Context Caching:**
    *   DeepSeek يدعم تخزين السياق. إذا قام عدة طلاب بدراسة "نفس الكتاب"، يمكننا تخزين الكتاب في كاش DeepSeek وتخفيض تكلفة الـ Input بنسبة 90% (من 0.14$ إلى 0.014$).
2.  **Smart Chunking:**
    *   عدم إرسال كامل الملف للمصطلحات (Glossary)، بل إرسال أول 20 صفحة فقط (عادة تحتوي على أهم التعاريف).
3.  **Rate Limiting:**
    *   وضع حد لعدد الملفات المجانية لكل مستخدم (مثلاً 3 ملفات يومياً) لتجنب الاستنزاف.

---

## الخلاصة
المشروع مجدٍ اقتصادياً جداً باستخدام DeepSeek. تكلفة خدمة مستخدم نشط بالكامل (بما في ذلك السيرفر والذكاء الاصطناعي) لا تتجاوز **ربع دولار شهرياً**، مما يتيح هامش ربح عالي جداً عند تفعيل الاشتراكات (مثلاً 5$ أو 10$ شهرياً).
