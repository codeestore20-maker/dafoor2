import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Translations
// Important: Arabic translations are conceptual, not literal, as requested.
const resources = {
  en: {
    translation: {
      "app_name": "Studdy",
      "your_subjects": "Your Subjects",
      "add_subject": "Add Subject",
      "student_name": "Student Name", // Placeholder
      "settings": "Settings",
      "upload_file": "Upload File",
      "repository": "Repository",
      "smart_tools": "Smart Tools",
      "dashboard": "Dashboard",
      "create_new_subject": "Create New Subject",
      "subject_name": "Subject Name",
      "subject_icon": "Subject Icon",
      "create": "Create",
      "cancel": "Cancel",
      "select_language": "Select Content Language",
      "upload_instruction": "Choose the language for AI summaries and flashcards. Key terms will be kept in original language.",
      "english": "English",
      "arabic": "Arabic",
      "spanish": "Spanish",
      "french": "French",
      "german": "German",
      "switch_language": "العربية",
      "back_to_library": "Back to Library",
      "ai_learning": "AI Learning",
      "deep_summary": "Deep Summary",
      "smart_notes": "Smart Notes",
      "exam_predictor": "Exam Predictor",
      "live_glossary": "Live Glossary",
      "study_space": "Study Space",
      "flashcards": "Flashcards",
      "quizzes": "Quizzes",
      "focus_review": "Focus Review",
      "notebooks": "Notebooks",
      "my_notebook": "My Notebook",
      "new_badge": "New",
      "level": "Level",
      "compiling_glossary": "Compiling glossary...",
      "glossary_description": "Automatically extract key terms and definitions from your document.",
      "build_glossary": "Build Glossary",
      "building": "Building...",
      "search_placeholder": "Search...",
      "study_mode_on": "Study Mode On",
      "study_mode_off": "Study Mode Off",
      "see_also": "See also:",
      "no_terms_found": "No terms found matching",
      "gathering_review": "Gathering your review list...",
      "clean_slate": "Clean Slate!",
      "clean_slate_desc": "You haven't made any recorded mistakes yet. Go take some quizzes or practice flashcards to identify weak spots!",
      "attention_needed": "Attention Needed",
      "attention_needed_desc": "We've detected {{count}} concepts where you've struggled. Let's fix them.",
      "all_clear": "All Clear!",
      "all_clear_desc": "You've repaired all your identified weak points. Great work!",
      "mistakes": "Mistakes",
      "last_seen": "Last seen",
      "mark_resolved": "Mark as Resolved",
      "repair": "Repair",
      "recently_repaired": "Recently Repaired",
      "mastered_review": "Mastered (Review)",
      "focus_review_title": "Focus Review: Weak Points",
      "mini_lesson_title": "Mini-Lesson: {{concept}}",
      "preparing_lesson": "Preparing lesson...",
      "lesson_load_error": "Failed to load lesson. Please try again.",
      "concept_breakdown": "Concept Breakdown",
      "key_explanation": "Key Explanation",
      "common_misconception": "A common misconception is:",
      "mnemonic": "Mnemonic:",
      "quick_check": "Quick Check",
      "i_understand": "I Understand Now",
      "close": "Close",

      // AI Teacher
      "prof_owl": "Prof. Owl",
      "academic_guide": "Academic Guide",
      "welcome_message": "Hoot! I am Professor Owl. Ready to help you soar through your studies! What shall we learn today?",
      "past_sessions": "Past Sessions",
      "ask_prof_placeholder": "Ask Professor Owl...",
      "ai_connection_error": "Hoot! I'm having trouble connecting to the library right now. Please try again.",
      "approved": "Approved",
      "new_chat": "New Chat",
      "chat_history": "Chat History",
      
      // Repository
      "files_count": "{{count}} Files",
      "last_updated_today": "Last updated today",
      "search_in_subject": "Search in {{subject}}...",
      "loading_files": "Loading files...",
      "quiet_here": "It's quiet in here...",
      "upload_first_doc_desc": "Upload your first document to start generating AI summaries and flashcards.",
      
      // Deep Summary
      "loading_summary": "Loading summary...",
      "deep_summary_empty": "No Summary Yet",
      "ai_not_analyzed": "Our AI hasn't analyzed this document yet. Click below to generate a comprehensive summary with key takeaways and concepts.",
      "generate_summary": "Generate Summary",
      "generating": "Generating...",
      "ai_generated": "AI Generated",
      "min_read": "{{count}} min read",
      
      // Exam Predictor
      "exam_predictor_title": "Exam Predictor: The Strategist",
      "analyzing_patterns": "Analyzing exam patterns...",
      "exam_strategist": "Exam Strategist",
      "exam_strategist_desc": "Let AI analyze your document to predict high-probability exam topics.",
      "predict_topics": "Predict Topics",
      "analyzing": "Analyzing...",
      "ai_analysis_complete": "AI Analysis Complete",
      "high_probability_msg": "We've identified high-probability topics for your upcoming exam. Focus on these first!",
      "probability": "Probability",
      "insight": "Insight",
      "appears_frequently": "Appears frequently in text",
      "practice_topic": "Practice This Topic",
      
      // Flashcards
      "loading_flashcards": "Loading flashcards...",
      "flashcards_empty": "Create Flashcards",
      "flashcards_desc": "Turn your study material into active recall practice. Our AI will generate key concept flashcards for you.",
      "generate_flashcards": "Generate Flashcards",
      "mastered_count": "Mastered: {{count}}",
      "next": "Next",
      "previous": "Previous",
      "flip_card": "Flip Card",
      "tap_to_flip": "Tap to flip",
      "review_again": "Review Again",
      "mastered": "Mastered",
      
      // Quiz Mode
      "loading_quiz": "Loading quiz...",
      "quiz_empty": "Create Pop Quiz",
      "quiz_desc": "Test your knowledge with an AI-generated quiz based on your study material.",
      "generate_quiz": "Generate Quiz",
      "quiz_complete": "Quiz Complete!",
      "quiz_score_msg": "You scored {{score}} out of {{total}}",
      "try_again": "Try Again",
      "pop_quiz": "Pop Quiz",
      "question_progress": "Question {{current}} of {{total}}",
      "submit_answer": "Submit Answer",
      "correct_msg": "Correct! Well done.",
      "incorrect_msg": "Incorrect.",
      "next_question": "Next Question",
      "finish_quiz": "Finish Quiz",
      
      // Smart Notebooks
      "thinking": "Thinking...",
      "ai_complete": "AI Complete",
      "save": "Save",
      "start_writing_placeholder": "Start writing...",
      
      // Smart Notes
      "drafting_notes": "Drafting notes...",
      "smart_notes_empty": "Create Smart Notes",
      "smart_notes_desc": "Get concise, bullet-point notes extracting key concepts, formulas, and facts from your document.",
      "generate_notes": "Generate Notes",
      "writing": "Writing...",
      "key_concept": "Key Concept",
      "notes_cover_desc": "These notes cover the core material found in the document. Review them alongside the Flashcards for best retention.",
      "study_tip": "Study Tip:",
      "study_tip_1": "Read through these notes once",
      "study_tip_2": "Try the Quiz Mode to test your understanding",
      
      // Navbar
      "search_placeholder_global": "Search for anything...",
      
      // Auth Pages
      "welcome_back_title": "Welcome back, Genius!",
      "new_here": "New here?",
      "create_account_promo": "Join thousands of students acing their exams.",
      "google_login": "Continue with Google",
      "apple_login": "Continue with Apple",
      "marketing_quote": "Study smarter, not harder.",
      "marketing_sub": "Let AI organize your chaos.",
      "email_label": "Email Address",
      "password_label": "Password",
      "name_label": "Full Name",
      "or_divider": "OR",
      "email_placeholder": "student@university.edu",
      "password_placeholder": "••••••••",
      "name_placeholder": "Your Name",
      "login_btn": "Log In",
      "register_btn": "Create Account",
      "no_account": "Don't have an account?",
      "has_account": "Already have an account?",
      "register_link": "Register Now",
      "login_link": "Log In",
      
      // Marketing Side
      "testimonial_1": "This app saved my GPA! Best study tool ever.",
      "testimonial_author_1": "Sarah, Med Student",
      "stat_users": "Active Students",
      "stat_hours": "Study Hours Saved"
    }
  },
  ar: {
    translation: {
      "app_name": "رفيق الدراسة",
      "your_subjects": "موادك",
      "add_subject": "مادة جديدة؟",
      "upload_file": "ارفع ملف",
      "select_language": "لغة الملف",
      "upload_instruction": "عطنا لغة الملف عشان نضبط لك الملخصات والبطاقات صح.",
      "cancel": "هوّنت",
      "english": "الإنجليزية",
      "arabic": "العربية",
      "spanish": "الإسبانية",
      "french": "الفرنسية",
      "german": "الألمانية",
      "switch_language": "English",
      "repository": "المكتبة",
      "dashboard": "الرئيسية",
      "back_to_library": "رجوع للمكتبة",
      "ai_learning": "مذاكرة ذكية",
      "deep_summary": "الزبدة (ملخص)",
      "smart_notes": "دفتر الملاحظات",
      "exam_predictor": "توقعات الاختبار",
      "live_glossary": "المصطلحات",
      "study_space": "مكان المذاكرة",
      "flashcards": "فلاش كاردز",
      "quizzes": "اختبر نفسك",
      "focus_review": "راجع أغلاطك",
      "notebooks": "دفاتري",
      "my_notebook": "دفتري",
      "new_badge": "جديد",
      "level": "المستوى",
      "compiling_glossary": "جالس أجمع لك المصطلحات...",
      "glossary_description": "بنطلع لك أهم المصطلحات وشرحها من ملفك بشكل تلقائي.",
      "build_glossary": "ابنِ القاموس",
      "building": "جاري البناء...",
      "search_placeholder": "ابحث...",
      "study_mode_on": "وضع المذاكرة: شغال",
      "study_mode_off": "وضع المذاكرة: طافي",
      "see_also": "شف بعد:",
      "no_terms_found": "ما لقينا شي يطابق",
      "gathering_review": "نجمع لك اللي يبيله مراجعة...",
      "clean_slate": "وضعك في السليم!",
      "clean_slate_desc": "ما عندك أغلاط مسجلة للحين. رح ذاكر واختبر عشان نعرف نقاط ضعفك!",
      "attention_needed": "يبيلها تركيز",
      "attention_needed_desc": "لقينا {{count}} مفاهيم دقرت فيها شوي. خلنا نضبطها سوا.",
      "all_clear": "كفو عليك!",
      "all_clear_desc": "ضبطت كل الأمور اللي كانت صعبة عليك. استمر!",
      "mistakes": "أغلاط",
      "last_seen": "آخر مرة شفتها",
      "mark_resolved": "خلاص فهمتها",
      "repair": "تصحيح",
      "recently_repaired": "ضبطتها مؤخراً",
      "mastered_review": "فنان (للمراجعة)",
      "focus_review_title": "مراجعة اللي فاتك",
      "mini_lesson_title": "درس ع السريع: {{concept}}",
      "preparing_lesson": "نجهز لك الدرس...",
      "lesson_load_error": "علق الدرس شوي. جرب مرة ثانية.",
      "concept_breakdown": "تفصيل المفهوم",
      "key_explanation": "شرح مبسط",
      "common_misconception": "ترا كثير يغلطون ويحسبون:",
      "mnemonic": "عشان تحفظها:",
      "quick_check": "شيك ع فهمك",
      "i_understand": "وصلت الفكرة",
      "close": "سكر",

      // AI Teacher
      "prof_owl": "اسأل البومة",
      "academic_guide": "خويك للدراسة",
      "welcome_message": "هلا والله! أنا البروفيسور بومة. موجود عشان أسهل عليك المذاكرة. وش ودك نمسك اليوم؟",
      "past_sessions": "سوالفنا قبل",
      "ask_prof_placeholder": "اسأل البروفيسور...",
      "ai_connection_error": "معليش، الاتصال يقطع شوي. جرب مرة ثانية.",
      "approved": "تم الاعتماد",
      "new_chat": "سالفة جديدة",
      "chat_history": "الأرشيف",
      
      // Repository
      "files_count": "{{count}} ملفات",
      "last_updated_today": "تحدثت اليوم",
      "search_in_subject": "دور في {{subject}}...",
      "loading_files": "نحمل ملفاتك...",
      "quiet_here": "المكان هادي...",
      "upload_first_doc_desc": "ارفع أول ملف وخلي الباقي علينا (ملخصات، فلاش كاردز، وأكثر).",
      
      // Deep Summary
      "loading_summary": "نلخص لك...",
      "deep_summary_empty": "ما فيه ملخص للحين",
      "ai_not_analyzed": "للحين ما حللنا هالملف. اضغط تحت عشان نعطيك الزبدة.",
      "generate_summary": "عطني الزبدة",
      "generating": "شغالين عليها...",
      "ai_generated": "من صنع الذكاء الاصطناعي",
      "min_read": "{{count}} دقايق قراءة",
      
      // Exam Predictor
      "exam_predictor_title": "توقعات الاختبار",
      "analyzing_patterns": "نحلل نمط الأسئلة...",
      "exam_strategist": "مخطط الاختبارات",
      "exam_strategist_desc": "خل الذكاء الاصطناعي يتوقع لك وش ممكن يجي في الاختبار بناءً على ملفك.",
      "predict_topics": "توقع الأسئلة",
      "analyzing": "جاري التحليل...",
      "ai_analysis_complete": "خلصنا تحليل",
      "high_probability_msg": "ركز على هالمواضيع، احتمال كبير تجي في الاختبار!",
      "probability": "الاحتمالية",
      "insight": "تلميحة",
      "appears_frequently": "تكررت كثير في النص",
      "practice_topic": "تدرب عليها",
      
      // Flashcards
      "loading_flashcards": "نجهز البطاقات...",
      "flashcards_empty": "أنشئ بطاقات",
      "generate_flashcards": "سو لي بطاقات",
      "flashcards_desc": "ذاكر بسرعة وبذكاء مع نظام البطاقات.",
      "flip_card": "اقلب البطاقة",
      "next_card": "اللي بعده",
      "mastered": "فهمتها",
      "needs_practice": "يبيلها مراجعة",
      "mastered_count": "ختمت: {{count}}",
      "start": "البداية",
      "finish": "النهاية",
      "tap_to_flip": "اضغط لقلب البطاقة",
      "next": "التالي",
      "previous": "السابق",
      "review_again": "راجع مرة ثانية",
      
      // Quiz
      "quiz_mode": "وضع الاختبار",
      "loading_quiz": "نكتب الأسئلة...",
      "quiz_empty": "أنشئ اختبار سريع",
      "generate_quiz": "سوي لي اختبار",
      "quiz_desc": "اختبر فهمك بأسئلة اختيار من متعدد.",
      "submit_answer": "اعتمد الإجابة",
      "next_question": "السؤال التالي",
      "quiz_completed": "كفو! خلصت الاختبار",
      "quiz_score_msg": "جبت {{score}} من {{total}}",
      "score": "الدرجة",
      "restart_quiz": "عيد الاختبار",
      "correct": "صح عليك!",
      "correct_msg": "إجابة صحيحة! بطل.",
      "incorrect": "خطأ، الجواب الصح هو:",
      "incorrect_msg": "إجابة خاطئة.",
      "try_again": "حاول مرة ثانية",
      "pop_quiz": "كويز سريع",
      "question_progress": "سؤال {{current}} من {{total}}",
      "finish_quiz": "انهي الاختبار",
      
      // Smart Notebooks
      "thinking": "أفكر...",
      "ai_complete": "كمل عني",
      "save": "حفظ",
      "start_writing_placeholder": "ابدا اكتب...",
      
      // Smart Notes
      "drafting_notes": "نكتب الملاحظات...",
      "smart_notes_empty": "أنشئ ملاحظات ذكية",
      "smart_notes_desc": "ملخصات ونقاط رئيسية من ملفك.",
      "generate_notes": "لخص لي",
      "writing": "يكتب...",
      "key_concept": "مفهوم مهم",
      "notes_cover_desc": "هذي الملاحظات تغطي أهم شي في الملف. راجعها مع الفلاش كاردز عشان تثبت.",
      "study_tip": "نصيحة:",
      "study_tip_1": "اقرأها مرة بتركيز",
      "study_tip_2": "جرب تختبر نفسك بعدها",
      
      // Navbar
      "search_placeholder_global": "دور أي شي...",
      
      // Dashboard
      "welcome_back": "هلا والله",
      "ready_to_learn": "المكان جاهز والقهوة عليك. وش بنذاكر اليوم؟",
      "today_date": "التاريخ",
      "study_hours": "ساعات المذاكرة",
      "completed_tasks": "الإنجازات",
      "streak_days": "أيام الصملة",
      "recent_files": "آخر ما فتحت",
      "daily_quote": "جرعة إلهام",
      "quote_text": "التعليم جواز سفرك للمستقبل، لأن بكرة ملك للي يجهز له اليوم.",
      "quote_author": "مالكوم إكس",
      "did_you_know": "تدري؟",
      "tip_text": "التكرار المتباعد هو سر الحفظ. راجع المعلومة على فترات متباعدة وبتثبت في مخك صح.",

      // Auth Pages
      "welcome_back_title": "هلا بالدافور!",
      "new_here": "جديد معنا؟",
      "create_account_promo": "انضم لآلاف الطلاب اللي رفعوا درجاتهم.",
      "google_login": "كمل بحساب Google",
      "apple_login": "كمل بحساب Apple",
      "marketing_quote": "ذاكر بذكاء، مو بجهد.",
      "marketing_sub": "خل الذكاء الاصطناعي يرتب حوستك.",
      "email_label": "البريد الإلكتروني",
      "password_label": "كلمة المرور",
      "name_label": "اسم الدافور",
      "or_divider": "أو",
      "email_placeholder": "student@university.edu",
      "password_placeholder": "••••••••",
      "name_placeholder": "اسمك الكريم",
      "login_btn": "دخول",
      "register_btn": "سجل حساب",
      "no_account": "ما عندك حساب؟",
      "has_account": "عندك حساب؟",
      "register_link": "سجل الحين",
      "login_link": "سجل دخولك",
      "login_failed": "خطأ في تسجيل الدخول، تأكد من بياناتك.",
      "registration_failed": "ما قدرنا نسجلك، تأكد من البيانات أو حاول بعدين.",
      "user_exists": "هالمستخدم موجود من قبل!",
      "user_not_found": "ما لقينا هالحساب، تأكد من الإيميل.",
      "invalid_password": "كلمة المرور غلط.",
      
      // Marketing Side
      "testimonial_1": "والله التطبيق فك أزمة! ارتفع معدلي بسببه.",
      "testimonial_author_1": "سارة، طب بشري",
      "stat_users": "طالب دافور",
      "stat_hours": "ساعة وفرناها"
    }
  }
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false, 
    },
    detection: {
        order: ['localStorage', 'navigator'],
        caches: ['localStorage'],
    }
  });

export default i18n;
